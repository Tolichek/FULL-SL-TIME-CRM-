<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MLM Notes</title>
    <style>
        :root {
            --tg-blue: #5085a8;
            --tg-bg: #ffffff;
            --tg-chat-bg: #9ab4c1;
            --tg-gray: #8e8e93;
        }

        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--tg-bg);
            overflow: hidden;
        }

        /* ЕКРАН 1: СПИСОК */
        .screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: none; flex-direction: column; background: white;
        }
        .active { display: flex; }

        .header {
            background: var(--tg-blue);
            color: white;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .my-avatar {
            width: 40px; height: 40px;
            border-radius: 50%;
            background: #fff;
            cursor: pointer;
            background-size: cover;
            background-position: center;
        }

        .chat-list { flex: 1; overflow-y: auto; }

        .chat-item {
            display: flex;
            padding: 10px 15px;
            align-items: center;
            border-bottom: 0.5px solid #f0f0f0;
            cursor: pointer;
        }

        .avatar {
            width: 54px; height: 54px;
            border-radius: 50%;
            background: #517da2;
            color: white;
            display: flex; align-items: center; justify-content: center;
            font-size: 20px; font-weight: bold;
            margin-right: 15px;
            background-size: cover;
        }

        .client-info {
            display: flex; flex-direction: column;
        }

        .client-name { font-weight: 600; font-size: 17px; }

        /* ЕКРАН 2: НОТАТКИ (ЧАТ) */
        #chat-screen { background: var(--tg-chat-bg); }
        .chat-header { background: #fff; padding: 10px; display: flex; align-items: center; gap: 15px; }
        .back-btn { font-size: 24px; color: var(--tg-gray); cursor: pointer; }
        
        .notes-area { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 8px; }
        .note-bubble {
            background: white; padding: 8px 12px;
            border-radius: 12px; max-width: 85%;
            align-self: flex-start; box-shadow: 0 1px 1px rgba(0,0,0,0.1);
            font-size: 15px;
        }

        .input-bar { background: white; padding: 10px; display: flex; gap: 10px; }
        .input-bar input { flex: 1; border: none; background: #f1f1f1; padding: 10px 15px; border-radius: 20px; outline: none; }

        .fab {
            position: fixed; bottom: 20px; right: 20px;
            width: 56px; height: 56px; background: #3390ec;
            border-radius: 50%; color: white;
            display: flex; align-items: center; justify-content: center;
            font-size: 24px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>

    <div id="list-screen" class="screen active">
        <div class="header">
            <div class="my-avatar" id="my-photo" onclick="alert('Налаштування акаунта')"></div>
            <span style="font-weight: 500; font-size: 20px;">Контакти</span>
        </div>
        <div class="chat-list" id="chat-list">
            </div>
        <div class="fab" onclick="addClient()">+</div>
    </div>

    <div id="chat-screen" class="screen">
        <div class="chat-header">
            <div class="back-btn" onclick="showScreen('list-screen')">←</div>
            <div id="active-avatar" class="avatar" style="width:40px; height:40px; margin:0;"></div>
            <div id="active-name" style="font-weight: 600;">Ім'я Клієнта</div>
        </div>
        <div class="notes-area" id="notes-area"></div>
        <div class="input-bar">
            <input type="text" id="note-input" placeholder="Нова замітка...">
            <button onclick="saveNote()" style="border:none; background:none; color:#3390ec; font-weight:bold;">ОК</button>
        </div>
    </div>

<script>
    let clients = JSON.parse(localStorage.getItem('mlm_simple_notes')) || [];
    let currentId = null;

    function renderList() {
        const list = document.getElementById('chat-list');
        list.innerHTML = '';
        clients.forEach(c => {
            list.innerHTML += `
                <div class="chat-item" onclick="openNotes(${c.id})">
                    <div class="avatar">${c.ln[0]}</div>
                    <div class="client-info">
                        <div class="client-name">${c.ln} ${c.fn}</div>
                    </div>
                </div>`;
        });
    }

    function openNotes(id) {
        currentId = id;
        const c = clients.find(x => x.id == id);
        document.getElementById('active-name').innerText = `${c.ln} ${c.fn}`;
        document.getElementById('active-avatar').innerText = c.ln[0];
        document.getElementById('notes-area').innerHTML = c.notes.map(n => `<div class="note-bubble">${n}</div>`).join('');
        showScreen('chat-screen');
    }

    function saveNote() {
        const input = document.getElementById('note-input');
        if (!input.value) return;
        const c = clients.find(x => x.id == currentId);
        c.notes.push(input.value);
        input.value = '';
        localStorage.setItem('mlm_simple_notes', JSON.stringify(clients));
        openNotes(currentId);
    }

    function addClient() {
        const ln = prompt("Прізвище:");
        const fn = prompt("Ім'я:");
        if (ln && fn) {
            clients.push({ id: Date.now(), ln, fn, notes: [] });
            localStorage.setItem('mlm_simple_notes', JSON.stringify(clients));
            renderList();
        }
    }

    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    renderList();
</script>
</body>
</html>
