<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MLM CRM - Messenger Style</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0e1621; color: white; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        .sidebar { background-color: #17212b; border-right: 1px solid #0e1621; }
        .chat-area { background-image: url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png'); background-size: cover; }
        .message-bubble { background-color: #182533; border-radius: 10px; padding: 8px 12px; max-width: 80%; margin-bottom: 8px; position: relative; }
        .contact-item:hover { background-color: #202b36; cursor: pointer; }
        .status-badge { font-size: 10px; padding: 2px 6px; border-radius: 10px; text-transform: uppercase; }
        .status-contact { background: #3390ec; }
        .status-client { background: #4caf50; }
        .status-partner { background: #a660f3; }
    </style>
</head>
<body class="h-screen flex overflow-hidden">

    <div class="sidebar w-1/3 flex flex-col">
        <div class="p-4 border-b border-gray-900 flex justify-between items-center">
            <h1 class="text-xl font-bold">Мої Контакти</h1>
            <button onclick="addNewContact()" class="bg-blue-500 hover:bg-blue-600 p-2 rounded-full">+</button>
        </div>
        <div id="contact-list" class="overflow-y-auto flex-1">
            </div>
    </div>

    <div class="chat-area flex-1 flex flex-col">
        <div id="chat-header" class="p-3 bg-[#17212b] border-b border-gray-900 hidden">
            <h2 id="active-name" class="font-bold">Виберіть контакт</h2>
            <p id="active-status" class="text-xs text-gray-400"></p>
        </div>
        
        <div id="messages" class="flex-1 p-4 overflow-y-auto flex flex-col">
            </div>

        <div id="input-area" class="p-4 bg-[#17212b] flex gap-2 hidden">
            <input id="note-text" type="text" placeholder="Напишіть замітку про зустріч..." class="flex-1 bg-[#242f3d] border-none text-white p-2 rounded-md outline-none">
            <button onclick="saveNote()" class="text-blue-400 font-bold px-4">ЗБЕРЕГТИ</button>
        </div>
    </div>

    <script>
        // Тимчасові дані (поки не підключимо Firebase)
        let contacts = [
            { id: 1, name: "Олександр Іванов", status: "контакт", notes: [{text: "Перша розмова, цікавиться МЛM", time: "12:30"}] },
            { id: 2, name: "Марія Коваль", status: "партнер", notes: [{text: "Зареєстрована в команду", time: "14:20"}] }
        ];

        let activeContactId = null;

        function renderContacts() {
            const list = document.getElementById('contact-list');
            list.innerHTML = '';
            contacts.forEach(c => {
                const badgeClass = c.status === 'партнер' ? 'status-partner' : (c.status === 'клієнт' ? 'status-client' : 'status-contact');
                list.innerHTML += `
                    <div onclick="selectContact(${c.id})" class="contact-item p-4 flex flex-col border-b border-gray-900">
                        <div class="flex justify-between">
                            <span class="font-semibold">${c.name}</span>
                            <span class="status-badge ${badgeClass}">${c.status}</span>
                        </div>
                    </div>
                `;
            });
        }

        function selectContact(id) {
            activeContactId = id;
            const contact = contacts.find(c => c.id === id);
            document.getElementById('chat-header').classList.remove('hidden');
            document.getElementById('input-area').classList.remove('hidden');
            document.getElementById('active-name').innerText = contact.name;
            document.getElementById('active-status').innerText = `Статус: ${contact.status}`;
            renderNotes();
        }

        function renderNotes() {
            const msgContainer = document.getElementById('messages');
            msgContainer.innerHTML = '';
            const contact = contacts.find(c => c.id === activeContactId);
            contact.notes.forEach(n => {
                msgContainer.innerHTML += `
                    <div class="message-bubble">
                        <p class="text-sm">${n.text}</p>
                        <span class="text-[10px] text-gray-400 block text-right">${n.time}</span>
                    </div>
                `;
            });
        }

        function saveNote() {
            const text = document.getElementById('note-text').value;
            if (!text || !activeContactId) return;
            
            const contact = contacts.find(c => c.id === activeContactId);
            const now = new Date();
            contact.notes.push({ text: text, time: now.getHours() + ":" + now.getMinutes() });
            
            document.getElementById('note-text').value = '';
            renderNotes();
        }

        renderContacts();
    </script>
</body>
</html>
